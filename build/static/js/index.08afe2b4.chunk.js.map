{"version":3,"sources":["media/imageDropShadow.png","media/image.png","utils/BooksAPI.js","service/book.js","components/BookCard/BookCard.js","pages/Home/Home.js","components/WebcamStreamCapture.js","pages/IframePage/IframePage.js","components/Menu.js","components/Nav.js","service/login.js","actions/authUser.js","actions/users.js","pages/Login/LoginFrom/LoginFrom.js","pages/Login/Login.js","pages/Welcome/Welcome.js","pages/404/404.js","App.js","components/Foot.js","reducers/authUser.js","reducers/users.js","reducers/index.js","middleware/index.js","index.js","utils/request.js"],"names":["module","exports","token","localStorage","Math","random","toString","substr","Book","getList","params","request","get","then","response","openBook","data","BookItemComponent","handleClick","e","url","bookId","BooksAPI","preventDefault","message","warning","state","this","props","bookItem","id","bookList","users","title","imageLinks","authors","cover","to","pathname","query","key","onClick","className","style","width","height","backgroundImage","backgroundSize","join","React","Component","connect","Object","values","BooksApp","visible","window","location","videoVisible","getBookList","a","BookService","success","msg","setState","error","handleOk","handleCancel","videoHandleCancel","console","log","userType","tip","spinning","length","map","onOk","closable","onCancel","bodyStyle","textAlign","footer","type","destroyOnClose","outline","controls","src","WebcamStreamCapture","webcamRef","useRef","mediaRecorderRef","useState","capturing","setCapturing","recordedChunks","setRecordedChunks","handleStartCaptureClick","useCallback","current","MediaRecorder","stream","mimeType","addEventListener","handleDataAvailable","start","size","prev","concat","handleStopCaptureClick","stop","handleDownload","blob","Blob","formData","FormData","append","axios","method","notification","open","icon","CheckCircleOutlined","color","catch","CloseCircleOutlined","justify","align","flex","display","alignItems","justifyContent","PauseCircleOutlined","danger","PlayCircleOutlined","audio","ref","videoConstraints","facingMode","CloudUploadOutlined","disabled","marginBottom","IframePage","isLoading","scale","scaleResize","screenWidth","innerWidth","innerHeight","floor","iframeEl","onload","description","InfoCircleOutlined","authUser","paddingLeft","WebkitOverflowScrolling","position","zIndex","left","top","bottom","right","background","el","allowtransparency","frameBorder","scrolling","transform","MenuComponent","currentRoute","split","mode","selectedKeys","Item","exact","activeClassName","withRouter","Nav","user","backIcon","extra","Menu","Login","post","username","password","SET_AUTHED_USER","setAuthUser","RECEIVE_USERS","UPDATE_USERS","updateUserBookId","LoginForm","value","generateDropdownData","text","name","image","avatar","avatarURL","LoginService","detail","setTimeout","bookPointer","history","push","onFinish","handleSubmit","bind","rules","required","prefix","UserOutlined","placeholder","LockOutlined","borderColor","htmlType","loading","handleLoading","marginLeft","marginRight","Logo","alt","fontSize","LoginFrom","onLoading","Welcome","styleBlueText","styleBlackText","bulletPointsList","fontWeight","styleContainer","styleCenter","styleButton","bulletPoints","item","span","pull","backgroundColor","tabSize","Page404","status","subTitle","App","Typography","Title","Paragraph","redirect","path","component","Home","render","LoadingBar","action","combineReducers","applyMiddleware","thunk","store","createStore","reducer","composeWithDevTools","middleware","ReactDOM","document","getElementById","joinQuery","Querys","keys","ajaxPromise","form","Promise","resolve","reject","contentType","r","JSON","stringify","XMLHttpRequest","withCredentials","undefined","setRequestHeader","onreadystatechange","event","readyState","parse","send","ajax","_ajax"],"mappings":"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","file":"static/js/index.08afe2b4.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/imageDropShadow.4a439170.png\";","module.exports = __webpack_public_path__ + \"static/media/image.dd608d34.png\";","\r\nconst api = \"https://reactnd-books-api.udacity.com\"\r\n\r\n\r\n// Generate a unique token for storing your bookshelf data on the backend server.\r\nlet token = localStorage.token\r\nif (!token)\r\n  token = localStorage.token = Math.random().toString(36).substr(-8)\r\n\r\nconst headers = {\r\n  'Accept': 'application/json',\r\n  'Authorization': token\r\n}\r\n\r\nexport const get = (bookId) =>\r\n  fetch(`${api}/books/${bookId}`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.book)\r\n\r\nexport const getAll = () =>\r\n  fetch(`${api}/books`, { headers })\r\n    .then(res => res.json())\r\n    .then(data => data.books)\r\n\r\nexport const update = (book, shelf) =>\r\n  fetch(`${api}/books/${book.id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ shelf })\r\n  }).then(res => res.json())\r\n\r\nexport const search = (query, maxResults) =>\r\n  fetch(`${api}/search`, {\r\n    method: 'POST',\r\n    headers: {\r\n      ...headers,\r\n      'Content-Type': 'application/json'\r\n    },\r\n    body: JSON.stringify({ query, maxResults })\r\n  }).then(res => res.json())\r\n    .then(data => data.books)","import request from '../utils/request'\r\n\r\n//请求逻辑实例化\r\n\r\nconst Book = {\r\n\r\n    getList: (params) => {\r\n        let data = request.get('/book/list', params)\r\n            .then((response) => {\r\n                return response\r\n            })\r\n        return data\r\n    },\r\n    openBook: (params = {}) => {\r\n        let data = request.get(`/_api2/read/openBook`, params)\r\n            .then((response) => {\r\n                return response\r\n            })\r\n        return data\r\n    }\r\n\r\n}\r\n\r\nexport default Book","\r\nimport React, { Fragment } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport { message } from \"antd\"\r\n\r\nimport { connect } from 'react-redux';\r\n\r\nimport BooksAPI from '../../service/book'\r\nimport './BookCard.css'\r\n\r\nclass BookItemComponent extends React.Component {\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n\r\n        }\r\n    }\r\n\r\n    handleClick = (e, url, bookId) => {\r\n        if (!url) {\r\n            e.preventDefault();\r\n            message.warning('请先完成前一本书')\r\n        } else {\r\n            BooksAPI.openBook({ bookId })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { bookItem, bookList, users } = this.props;\r\n\r\n        const { id, title, imageLinks = {}, authors = [], cover, url\r\n        } = bookItem;\r\n\r\n        return (\r\n            <Fragment>\r\n                <Link to={\r\n                    {\r\n                        pathname: `iframe/${id}`,\r\n                        query: {\r\n                            url: url,\r\n                            bookId: id\r\n                        }\r\n                    }}>\r\n                    <li key={id} onClick={(e) => this.handleClick(e, url, id)}>\r\n                        <div className=\"book\">\r\n                            <div className=\"book-top\">\r\n                                <div className=\"book-cover\" style={{ width: 128, height: 193, backgroundImage: `url(${cover})`, backgroundSize: '100%' }}></div>\r\n                            </div>\r\n                            <div className=\"book-title\">{title}</div>\r\n                            <div className=\"book-authors\">{authors.join()}</div>\r\n                        </div>\r\n                    </li>\r\n                </Link>\r\n\r\n            </Fragment>)\r\n    }\r\n}\r\n\r\nexport default connect(\r\n    ({ users }) => ({\r\n        users: Object.values(users)\r\n    }))(BookItemComponent);\r\n","import React from 'react'\r\nimport { Spin, Modal, message, Button } from \"antd\"\r\nimport * as BooksAPI from '../../utils/BooksAPI'\r\nimport BookService from '../../service/book'\r\n\r\nimport { groupBy } from '../../utils'\r\nimport BookItem from '../../components/BookCard/BookCard'\r\nimport './Home.css'\r\n\r\nclass BooksApp extends React.Component {\r\n    state = {\r\n        bookList: [],\r\n        visible: window.location.pathname === '/home' ? false : true,\r\n        videoVisible: false,\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getBookList()\r\n        const {data} = this.props.location\r\n        console.log(\"-----------------------------\")\r\n        console.log(data)\r\n        console.log(data.userType)\r\n        console.log(\"-----------------------------\")\r\n\r\n        this.setState({userType: data.userType}, () => {\r\n            console.log(this.state.userType, 'userType');\r\n        }); \r\n    }\r\n\r\n\r\n    // getBookList = async () => {\r\n    //     let bookList = await BooksAPI.getAll()\r\n\r\n    //     let bookGroups = groupBy(bookList, 'shelf')\r\n    //     this.setState({\r\n    //         bookList: bookList,\r\n    //         bookGroups: bookGroups\r\n    //     })\r\n    // }\r\n\r\n    //请求列表数据\r\n    getBookList = async () => {\r\n\r\n        const { success, data, msg } = await BookService.getList()\r\n        if (success) {\r\n            this.setState({\r\n                bookList: data,\r\n            })\r\n        } else {\r\n            message.error(`${msg}`)\r\n        }\r\n\r\n    }\r\n\r\n    handleOk = e => {\r\n        this.setState({\r\n            visible: false,\r\n            videoVisible: true\r\n        });\r\n    };\r\n\r\n    handleCancel = e => {\r\n        this.setState({\r\n            visible: false,\r\n        });\r\n    };\r\n    videoHandleCancel = () => {\r\n        this.setState({\r\n            videoVisible: false,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        const { bookList, visible, videoVisible, userType } = this.state\r\n        return (\r\n            <div className=\"home-books-results\">\r\n                {(!videoVisible && !visible) && <Spin tip=\"加载中...\" spinning={bookList.length > 0 ? false : true}>\r\n                    <ol className=\"books-grid\">\r\n                        {\r\n                            // 🔧 fix2:  Search results are not shown when all of the text is deleted out of the search input box.\r\n                            bookList.map(bookItem => <BookItem key={bookItem.id} bookList={bookList} getBookList={this.getBookList} bookItem={bookItem} />)\r\n                        }\r\n                    </ol>\r\n                </Spin>}\r\n                <Modal\r\n                    title={null}\r\n                    visible={visible}\r\n                    onOk={this.handleOk}\r\n                    closable={false}\r\n                    onCancel={this.handleCancel}\r\n                    bodyStyle={{ textAlign: 'center' }}\r\n                    footer={[\r\n                        <Button key=\"submit\" type=\"primary\" onClick={this.handleOk}>\r\n                            确定\r\n                        </Button>]}\r\n                >\r\n                    开始实验前请您观看本系统教学视频\r\n                </Modal>\r\n                <Modal\r\n                    title={null}\r\n                    width={'70%'}\r\n                    visible={videoVisible}\r\n                    onCancel={this.videoHandleCancel}\r\n                    footer={null}\r\n                    destroyOnClose={true}\r\n                >\r\n                    <video style={{ width: '100%', height: '100%', outline: 'unset' }} controls>\r\n                        {userType != 1 && <source src='/video.mp4' type=\"video/mp4\" />}\r\n                        {userType == 1 && <source src='/videoB.mp4' type=\"video/mp4\" />}\r\n                    </video>\r\n                </Modal>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default BooksApp\r\n","import React from 'react';\r\nimport Webcam from \"react-webcam\";\r\nimport axios from 'axios';\r\nimport { Button, Row, Col, notification } from 'antd';\r\nimport { CheckCircleOutlined, CloseCircleOutlined, CloudUploadOutlined, PlayCircleOutlined, PauseCircleOutlined } from '@ant-design/icons';\r\n\r\n\r\nexport const WebcamStreamCapture = () => {\r\n  const webcamRef = React.useRef(null);\r\n  const mediaRecorderRef = React.useRef(null);\r\n  const [capturing, setCapturing] = React.useState(false);\r\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\r\n\r\n  const videoConstraints = {\r\n    width: 320,\r\n    height: 240,\r\n    facingMode: \"user\"\r\n  };\r\n\r\n  const handleStartCaptureClick = React.useCallback(() => {\r\n    console.log(\"Start Capture\");\r\n    setCapturing(true);\r\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\r\n      mimeType: \"video/webm\"\r\n    });\r\n    mediaRecorderRef.current.addEventListener(\r\n      \"dataavailable\",\r\n      handleDataAvailable\r\n    );\r\n    mediaRecorderRef.current.start();\r\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\r\n\r\n  const handleDataAvailable = React.useCallback(\r\n    ({ data }) => {\r\n      if (data.size > 0) {\r\n        setRecordedChunks((prev) => prev.concat(data));\r\n      }\r\n    },\r\n    [setRecordedChunks]\r\n  );\r\n\r\n  const handleStopCaptureClick = React.useCallback(() => {\r\n    console.log(\"Stop Capture\");\r\n    mediaRecorderRef.current.stop();\r\n    setCapturing(false);\r\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\r\n\r\n  const handleDownload = React.useCallback(() => {\r\n    console.log(\"Upload Video\");\r\n    if (recordedChunks.length) {\r\n      console.log(\"Creating blob\");\r\n      const blob = new Blob(recordedChunks, {\r\n        type: \"video/webm\"\r\n      });\r\n    var formData = new FormData();\r\n    formData.append(\"blob\", blob);\r\n\r\n    axios({\r\n      method: 'post',\r\n      url: \"http://ec2-35-153-79-96.compute-1.amazonaws.com:8080/video/upload\",\r\n      data: formData, \r\n    }).then(function (response) {\r\n      console.log(\"Success\");\r\n      console.log(response);\r\n      notification.open({\r\n        message: 'Successfully uploaded video',\r\n        icon: <CheckCircleOutlined  style={{ color: '#a0d911' }} />,\r\n      });\r\n    })\r\n    .catch(function (error) {\r\n      console.log(\"Failed\");\r\n      console.log(error.response.data.message);\r\n      notification.open({\r\n        message: 'Failed to upload video',\r\n        icon: <CloseCircleOutlined  style={{ color: '#f5222d' }} />,\r\n      });\r\n    });\r\n\r\n    //formData.append(\"duration\", 10);\r\n    /*console.log(\"Making new request var\");\r\n    var request = new XMLHttpRequest();\r\n    //Change this\r\n    console.log(\"Starting\");\r\n    request.open(\"POST\", \"http://ec2-35-153-79-96.compute-1.amazonaws.com:8080/video/upload\");\r\n    request.send(formData);\r\n    console.log(\"Sent\");\r\n    console.log(request.status);\r\n    if (request.status === 200) {\r\n      console.log(\"Success\");\r\n      console.log(request.responseText);\r\n    } else {\r\n      console.log(\"Error\");\r\n      console.log(request.responseText);\r\n    }\r\n    console.log(\"Done!\");*/\r\n\r\n    setRecordedChunks([]);\r\n    }\r\n  }, [recordedChunks]);\r\n\r\n  const stopAndDownload = React.useCallback(() => { \r\n    handleStopCaptureClick();\r\n    if (recordedChunks.length > 0){\r\n      handleDownload();\r\n    }\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <Row justify=\"space-around\" align=\"middle\">\r\n          <Col flex={1}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n            }}>\r\n              {capturing ? (\r\n              <Button onClick={handleStopCaptureClick} type=\"primary\" icon={<PauseCircleOutlined />} danger>结束录制并上传</Button>\r\n              ) : (\r\n                <Button onClick={handleStartCaptureClick}\r\n                  type=\"primary\"\r\n                  icon={<PlayCircleOutlined />}\r\n                >开始录制</Button>\r\n              )}\r\n            </div>\r\n          </Col>\r\n\r\n          <Col flex={3}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n            }}>\r\n              <Webcam audio={true} ref={webcamRef} videoConstraints={videoConstraints} width=\"180\"/>\r\n            </div>\r\n          </Col>\r\n\r\n          <Col flex={1}>\r\n            <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n            }}>\r\n              {recordedChunks.length > 0 && (\r\n                <Button onClick={handleDownload} \r\n                type=\"primary\"\r\n                icon={<CloudUploadOutlined />}\r\n                >开始上传</Button>\r\n              )}\r\n              {recordedChunks.length <= 0 && (\r\n                <Button disabled\r\n                type=\"primary\"\r\n                icon={<CloudUploadOutlined />}\r\n                >开始上传</Button>\r\n              )}\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n\r\n        <Row style={{ marginBottom: 8 }}></Row>\r\n\r\n      </div>\r\n      \r\n    </>\r\n  );\r\n};","import React, { Component } from 'react';\r\nimport { Spin, notification } from 'antd';\r\nimport { connect } from 'react-redux';\r\nimport {WebcamStreamCapture} from '../../components/WebcamStreamCapture.js';\r\nimport { InfoCircleOutlined } from '@ant-design/icons';\r\n\r\nclass IframePage extends Component {\r\n  state = {\r\n    isLoading: true,\r\n    scale: 1\r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    this.scaleResize()\r\n    this.iframeEl.onload = () => {\r\n      this.setState({\r\n        isLoading: false,\r\n      });\r\n    };\r\n\r\n    notification.open({\r\n      message: 'Please click start Capture before starting.',\r\n      description:\r\n        'When finished, please press the stop capture button',\r\n      icon: <InfoCircleOutlined style={{ color: '#f5222d' }} />,\r\n      onClick: () => {\r\n        console.log('Notification Clicked!');\r\n      },\r\n    });\r\n  }\r\n\r\n  //适配\r\n\r\n  scaleResize = () => {\r\n    let scale = 1;\r\n    let screenWidth = window.innerWidth;\r\n    let screenHeight = window.innerHeight;\r\n\r\n    if (screenWidth > 1024) {\r\n      scale = 1\r\n    } else if (1024 * 0.8 >= screenWidth <= 1024) {\r\n      scale = 0.8\r\n    } else {\r\n      scale = Math.floor(screenWidth / 1024 * 10) / 10\r\n    }\r\n    this.setState({\r\n      scale,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { isLoading, scale } = this.state;\r\n    // 打平之后的菜单\r\n    const query = this.props.location.query || {};\r\n    const { url, bookId } = query;\r\n    const { authUser } = this.props;\r\n\r\n    return (\r\n      <div>\r\n        <div >\r\n          <WebcamStreamCapture/>\r\n        </div>\r\n        <div\r\n          className=\"iframe-container\"\r\n          style={{\r\n            paddingLeft: 10,\r\n            width: 1024,\r\n            height: 768,\r\n            WebkitOverflowScrolling: 'touch',\r\n            // overflow-y: scroll;\r\n            // pointerEvents: 'none'\r\n          }}\r\n        >\r\n          {isLoading ? (\r\n            <div\r\n              style={{\r\n                position: 'absolute',\r\n                zIndex: 1000,\r\n                left: 0,\r\n                top: 0,\r\n                bottom: 0,\r\n                right: 0,\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                background: 'rgb(245, 247, 250)',\r\n              }}\r\n            >\r\n              <Spin />\r\n            </div>\r\n          ) : null}\r\n          <iframe\r\n            title=\"外链\"\r\n            ref={el => (this.iframeEl = el)}\r\n            allowtransparency=\"no\"\r\n            src={`${url}?user=${authUser}&bookId=${bookId}`}\r\n            frameBorder=\"0\"\r\n            width={'100%'}\r\n            height={'100%'}\r\n            scrolling=\"yes\"\r\n            style={{ transform: `scale(${scale})` }}\r\n          // sandbox=\"allow-scripts allow-same-origin allow-popups\"\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(({ authUser }) => ({ authUser }))(IframePage);\r\n","import React from \"react\";\r\nimport { NavLink, withRouter } from \"react-router-dom\";\r\nimport { Menu } from \"antd\"\r\n\r\n\r\nconst MenuComponent = (props) => {\r\n    const { location } = props;\r\n    const currentRoute = location.pathname.split('/')[1] || 'home';\r\n    return (\r\n        <Menu mode=\"horizontal\" selectedKeys={[currentRoute]}>\r\n            <Menu.Item key=\"home\" >\r\n                <NavLink to=\"/home\" exact activeClassName=\"active\">\r\n                    Home\r\n            </NavLink>\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n}\r\n\r\n\r\nexport default withRouter(MenuComponent)","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { PageHeader } from \"antd\"\r\nimport MenuComponent from './Menu'\r\n\r\nconst Nav = (props) => {\r\n  const { user = {} } = props;\r\n\r\n  return (\r\n    <PageHeader\r\n      className=\"site-page-header\"\r\n      backIcon={false}\r\n      title=\"Books View\"\r\n      extra={\r\n        <MenuComponent />\r\n      }\r\n    >\r\n    </PageHeader>\r\n  );\r\n}\r\n\r\n\r\nexport default connect(\r\n  ({ authUser, users }) => ({\r\n    user: users[authUser]\r\n  })\r\n)(Nav);","import request from '../utils/request'\r\n\r\n//请求逻辑实例化\r\n\r\nconst Login = {\r\n\r\n    post: (params = {}) => {\r\n        let { username, password } = params\r\n        let data = request.post(`/_api2/user/login?id=9&password=${password}&userType=1&username=${username}`, params)\r\n            .then((response) => {\r\n            \tconsole.log(response);\r\n                return response\r\n            })\r\n        return data\r\n    }\r\n}\r\n\r\nexport default Login","export const SET_AUTHED_USER = \"SET_AUTHED_USER\";\r\n\r\nexport function setAuthUser(id) {\r\n  return {\r\n    type: SET_AUTHED_USER,\r\n    id\r\n  };\r\n}\r\n","export const RECEIVE_USERS = \"RECEIVE_USERS\";\r\nexport const UPDATE_USERS = \"UPDATE_USERS\";\r\n\r\nexport function receiveUsers(users) {\r\n  return {\r\n    type: RECEIVE_USERS,\r\n    users\r\n  };\r\n}\r\n\r\n\r\nexport function updateUserBookId(id) {\r\n  return {\r\n    type: UPDATE_USERS,\r\n    bookId: id\r\n  };\r\n}","import React, { Component } from 'react';\r\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport LoginService from '../../../service/login'\r\n\r\nimport {\r\n  Form,\r\n  Button,\r\n  Input,\r\n  Row,\r\n  message\r\n} from 'antd';\r\nimport { setAuthUser } from '../../../actions/authUser';\r\nimport { updateUserBookId } from '../../../actions/users';\r\n\r\nclass LoginForm extends Component {\r\n  static propTypes = {\r\n\r\n  };\r\n  state = {\r\n    value: ''\r\n  };\r\n  async handleSubmit(values) {\r\n\r\n    const { setAuthUser, updateUserBookId } = this.props;\r\n\r\n    const { username, password } = values\r\n\r\n    let { success, detail = {} } = await LoginService.post({ username, password })\r\n\r\n    if (success) {\r\n      message.success('登陆成功')\r\n      setTimeout(() => {\r\n        setAuthUser(`${username}`)\r\n        updateUserBookId(detail.bookPointer)\r\n        //Pass down detail.usertype\r\n\r\n        this.props.history.push({pathname: \"/\", data: {\r\n          userType: detail.userType\r\n        }});\r\n      }, 500)\r\n\r\n    } else {\r\n      message.error('账号密码错误')\r\n    }\r\n\r\n  };\r\n  generateDropdownData = () => {\r\n    const { users } = this.props;\r\n\r\n    return users.map(user => ({\r\n      key: user.id,\r\n      text: user.name,\r\n      value: user.id,\r\n      image: { avatar: true, src: user.avatarURL }\r\n    }));\r\n  };\r\n  render() {\r\n\r\n    return (\r\n\r\n      <Form style={{ 'width': '100%' }} onFinish={this.handleSubmit.bind(this)} className=\"login-form\">\r\n        <Form.Item\r\n          name=\"username\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your Username!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input style={{ 'borderRadius': '10px' }} prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\r\n        </Form.Item>\r\n        <Form.Item\r\n          name=\"password\"\r\n          rules={[\r\n            {\r\n              required: true,\r\n              message: 'Please input your Password!',\r\n            },\r\n          ]}\r\n        >\r\n          <Input\r\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\r\n            style={{ 'borderRadius': '10px' }}\r\n            type=\"password\"\r\n            placeholder=\"Password\"\r\n          />\r\n        </Form.Item>\r\n        <Form.Item>\r\n          <Row justify=\"center\">\r\n            <Button type=\"primary\" style={{ background: \"orange\", borderColor: \"orange\", 'borderRadius': '25px' }} htmlType=\"submit\" className=\"login-form-button\">Login</Button>\r\n          </Row>\r\n        </Form.Item>\r\n      </Form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(\r\n  ({ users }) => ({\r\n    users: Object.values(users)\r\n  }),\r\n  { setAuthUser, updateUserBookId }\r\n)(withRouter(LoginForm));\r\n\r\n","import React, { Component } from 'react';\r\nimport { Card } from \"antd\";\r\nimport Logo from '../../media/image.png';\r\n\r\nimport LoginFrom from './LoginFrom/LoginFrom'\r\nimport './Login.scss'\r\nimport {\r\n  Row,\r\n} from 'antd';\r\n\r\nexport class Login extends Component {\r\n  state = {\r\n    loading: false\r\n  };\r\n  handleLoading = () => {\r\n    this.setState({ loading: true });\r\n  };\r\n\r\n  render() {\r\n    const { loading } = this.state\r\n    return (\r\n      <div>\r\n        <div className=\"login-box flex-wrap flex-center flex-middle flex-direction-column\">\r\n          <Card \r\n            style={{ 'width': '150%', 'borderRadius': '25px' }}\r\n            >\r\n            <img style={{\r\n              display: 'block',\r\n              marginLeft: 'auto',\r\n              marginRight: 'auto',\r\n              width: '55%'\r\n            }} src={Logo} alt=\"Logo\" />\r\n            <h3 style={{color:'orange', fontSize:'24px', textAlign: 'center'}}>Orange Oakleaf</h3>\r\n            <h3 style={{color:'orange', fontSize:'18px'}}>Sign In</h3>\r\n            <LoginFrom onLoading={this.handleLoading} />\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default Login;","import React, { Component } from 'react';\r\nimport Logo from '../../media/imageDropShadow.png';\r\nimport { Link } from 'react-router-dom';\r\nimport { Card, Row, Col, Button } from \"antd\";\r\n\r\nexport class Welcome extends Component {\r\n  state = {\r\n    loading: false\r\n  };\r\n  handleLoading = () => {\r\n    this.setState({ loading: true });\r\n  };\r\n\r\n\r\n  render() {\r\n    const { loading } = this.state\r\n    return (\r\n      <div>\r\n        <img style={{\r\n              display: 'block',\r\n              marginLeft: 'auto',\r\n              marginRight: 'auto',\r\n              width: '15%'\r\n            }} src={Logo} alt=\"Logo\" />\r\n        <h2 style={styleBlueText}>University of California, Irvine</h2>\r\n        <h2 style={styleBlueText}>Interactive Storybook Research Project</h2>\r\n        <h2 style={styleBlueText}>美国加州大学欧文分校 · 互动式英语电子绘本科研项目</h2>\r\n        <Card \r\n            style={{ \r\n              'width': '100%', \r\n              'borderRadius': '25px',\r\n              borderColor: 'yellow'\r\n              }}\r\n            >\r\n            <h4 style={styleBlackText}>尊敬的家长:</h4>\r\n            <h4 style={styleBlackText}>您好，感谢您与孩子一起参与本次研究项目！为了实验顺利进行，请您注意以下几点：</h4>\r\n            {bulletPointsList()}\r\n            <h4 style={styleBlackText}>如果您对实验有任何疑问，欢迎随时与我们联系：</h4>\r\n            <h4 style={{color:'black',fontSize:'medium',textAlign: 'center', fontWeight: 'bold'}}>微信：dayunheshui | 邮箱：dandany1@uci.edu | 电话：(中)13240736364 / (美)213-446-8747</h4>\r\n        </Card>\r\n          <h2 style={styleBlueText}>请您在做好准备后，点击“登录”</h2>\r\n          <div style={styleContainer}>\r\n            <div style={styleCenter}>\r\n              <Link to=\"/login\" > \r\n                 <Button type=\"primary\" style={styleButton}>登 &emsp; 录</Button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst bulletPoints = [\r\n'请在阅读期间确保网络畅通',\r\n '请在安静的环境下进行阅读',\r\n  '阅读时请保持设备音量适中',\r\n   '请允许我们的网站访问您的摄像头，并确保您和孩子的脸一直在摄像头范围内'\r\n];\r\n\r\nconst bulletPointsList = () => (\r\n  <ul>\r\n    {bulletPoints.map(function(item) {\r\n      return (\r\n        <Row>\r\n            <Col span={20} push={4}>\r\n            <div style={styleBlackText}> {item} </div>\r\n            </Col>\r\n            <Col span={4} pull={20}>\r\n              <img style={{\r\n                display: 'block',\r\n                marginLeft: 'auto',\r\n                marginRight: 'auto',\r\n                width: '30%'\r\n              }} src={Logo} alt=\"Logo\" />\r\n            </Col>\r\n          </Row>\r\n        );\r\n    })}\r\n  </ul>\r\n);\r\n\r\nconst styleTab = {\r\n  tabSize: 6\r\n}\r\n\r\nconst styleBlueText = {\r\n  color:'blue',\r\n  fontSize:'x-large',\r\n  textAlign: 'center',\r\n  fontWeight: 'bold'\r\n};\r\n\r\nconst styleBlackText = {\r\n  color:'black',\r\n  fontSize:'medium',\r\n  fontWeight: 'bold'\r\n};\r\n\r\nconst styleContainer = {\r\n  position: 'relative'\r\n};\r\n\r\nconst styleCenter = {\r\n  display: 'flex',\r\n  justifyContent: 'center',\r\n  alignItems: 'center'\r\n};\r\n\r\nconst styleButton = {\r\n  backgroundColor: 'blue',\r\n  borderColor: 'blue',\r\n  textAlign: 'center',\r\n  fontSize:'medium',\r\n  'borderRadius': '10px',\r\n  fontWeight: 'bold',\r\n  tabSize: 6\r\n};\r\n\r\nexport default Welcome;","import React from \"react\";\r\nimport { Result, Button } from \"antd\"\r\nimport { withRouter } from \"react-router-dom\";\r\n\r\nconst Page404 = (props) => {\r\n    return (\r\n        <Result\r\n            status=\"403\"\r\n            title=\"需要重新登陆\"\r\n            subTitle=\"抱歉，刷新后无法保存进度 请返回主页重新登录\"\r\n            extra={<Button type=\"primary\" onClick={() => props.history.push('/')}>返回主页</Button>}\r\n        />\r\n    )\r\n}\r\n\r\nexport default withRouter(Page404)","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\r\nimport Home from \"./pages/Home/Home\";\r\nimport IframePage from \"./pages/IframePage/IframePage\";\r\n\r\nimport Nav from \"./components/Nav\";\r\nimport Login from \"./pages/Login/Login\";\r\nimport Welcome from \"./pages/Welcome/Welcome\";\r\nimport Page404 from \"./pages/404/404\";\r\n\r\nimport { Fragment } from \"react\";\r\n\r\nimport Footer from \"./components/Foot\";\r\n// import './App.css'\r\nclass App extends Component {\r\n  componentDidMount() {\r\n    //this.context.router.transitionTo('/');\r\n    this.setState({ redirect: \"/\" });\r\n  }\r\n\r\n  render() {\r\n    const { authUser, loading } = this.props;\r\n    console.log('authUser', authUser)\r\n    return (\r\n      <Router>\r\n        <Fragment>\r\n          {authUser && <Nav />}\r\n          <div className=\"container flex-wrap flex-center flex-middle flex-direction-column\">\r\n            {!authUser\r\n              ?\r\n              <Route render={() => (\r\n                <Fragment>\r\n                  <Switch>\r\n                    <Route path=\"/\" exact component={Welcome} />\r\n                    <Route path=\"/login\" exact component={Login} />\r\n                    <Route path='*' component={Page404} />\r\n                  </Switch>\r\n                </Fragment>\r\n              )} />\r\n              :\r\n              <Fragment>\r\n                <Switch>\r\n                  <Route path=\"/\" exact component={Home} />\r\n                  <Route path=\"/home\" exact component={Home} />\r\n                  <Route path=\"/iframe/:bookId\" component={IframePage} />\r\n                </Switch>\r\n                {/* <Footer /> */}\r\n              </Fragment>\r\n            }\r\n          </div>\r\n        </Fragment>\r\n\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(({ authUser, LoadingBar }) => ({ authUser, loading: LoadingBar }))(App);\r\n","import React from \"react\";\r\nimport { Typography, Space } from \"antd\"\r\nimport { Link } from \"react-router-dom\";\r\nimport { PieChartOutlined, AreaChartOutlined, FundOutlined } from '@ant-design/icons';\r\n\r\nconst { Title, Paragraph } = Typography;\r\n\r\nconst Footer = (props) => {\r\n\r\n  return (\r\n    <div className=\"footer-box flex-wrap flex-middle flex-direction-column\" style={{ width: \"100%\" }}>\r\n      <Title style={{ textAlign: 'center', padding: 20 }} level={4}>What we have is more than you expected</Title>\r\n      <div className=\"flex-wrap flex-middle\" style={{ padding: 20 }}>\r\n        <Space size={100}>\r\n          <div className='text-center'>\r\n            <PieChartOutlined style={{ fontSize: 50 }} />\r\n            <div>\r\n              icon1\r\n            </div>\r\n          </div>\r\n          <div className='text-center'>\r\n            <AreaChartOutlined style={{ fontSize: 50 }} />\r\n            <div>\r\n              icon2\r\n            </div>\r\n          </div>\r\n          <div className='text-center'>\r\n            <FundOutlined style={{ fontSize: 50 }} />\r\n            <div>\r\n              icon3\r\n            </div>\r\n          </div>\r\n\r\n\r\n        </Space>\r\n      </div>\r\n      <div className='footer-bottom' style={{ background: 'rgb(214, 216, 218)', padding: '50px 50px 10px' }}>\r\n        <Title style={{ textAlign: 'center' }} level={2}>Bringing Game to Everyone Life</Title>\r\n        <div className='flex-wrap flex-between' style={{ marginTop: 40 }}>\r\n          <div className='footer-left'>\r\n            <Space size=\"middle\">\r\n              <span>\r\n                <Link to=\"/\">\r\n                  Home\r\n              </Link>\r\n              </span>\r\n              <span>\r\n                <Link to=\"/Market\">\r\n                  Market\r\n              </Link>\r\n              </span>\r\n              <span>\r\n                <Link to=\"/myAccount\">\r\n                  My account\r\n              </Link>\r\n              </span>\r\n              <span>\r\n                <Link to=\"/contact\">\r\n                  contact\r\n              </Link>\r\n              </span>\r\n            </Space>\r\n\r\n          </div>\r\n          <div className='footer-right'>\r\n            Follow us\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\nexport default Footer","import { SET_AUTHED_USER } from \"../actions/authUser\";\r\n\r\nexport default function authUser(state = null, action) {\r\n  switch (action.type) {\r\n    case SET_AUTHED_USER:\r\n      return action.id;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { RECEIVE_USERS, UPDATE_USERS } from \"../actions/users\";\r\n\r\nexport default function users(state = {}, action) {\r\n  switch (action.type) {\r\n    case RECEIVE_USERS:\r\n      return {\r\n        ...state,\r\n        ...action.users\r\n      };\r\n    case UPDATE_USERS:\r\n      return {\r\n        ...state,\r\n        bookId: action.bookId\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport authUser from \"./authUser\";\r\nimport users from \"./users\";\r\n// import { loadingBarReducer } from \"react-redux-loading\";\r\n\r\nexport default combineReducers({\r\n  authUser,\r\n  users,\r\n});\r\n","import thunk from \"redux-thunk\";\r\n// import logger from \"./logger\";\r\nimport { applyMiddleware } from \"redux\";\r\n\r\nexport default applyMiddleware(thunk);\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./index.css\";\r\nimport App from \"./App\";\r\nimport { createStore } from \"redux\";\r\nimport { Provider } from \"react-redux\";\r\nimport reducer from \"./reducers\";\r\nimport middleware from \"./middleware\";\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nconst store = createStore(\r\n  reducer,\r\n  composeWithDevTools(middleware)\r\n); // 使用状态管理\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById(\"root\")\r\n);\r\n","/**\r\n * ajax工具类\r\n * 也可用 axios(https://github.com/axios/axios)\r\n */\r\n\r\nconst joinQuery = function (params) {\r\n\r\n    var Querys = Object.keys(params).map(key => {\r\n        return `${key}=${params[key]}`\r\n    }).join('&')\r\n\r\n    return `?${Querys}`\r\n}\r\n\r\n//原生ajx\r\nconst ajax = function (request) {\r\n\r\n    var r = new XMLHttpRequest()\r\n    r.open(request.method, request.url, true)\r\n    r.withCredentials = true;\r\n    if (request.contentType !== undefined) {\r\n        r.setRequestHeader('Content-Type', request.contentType)\r\n    }\r\n    r.onreadystatechange = function (event) {\r\n        if (r.readyState === 4) {\r\n            if (r.status == 200) {\r\n                const data = JSON.parse(r.response)\r\n                request.success(data)\r\n            }\r\n            if (r.status == 500) {\r\n                request.error()\r\n            }\r\n        }\r\n    }\r\n    if (request.method === 'GET') {\r\n        r.send()\r\n    } else {\r\n        r.send(request.data)\r\n    }\r\n}\r\n\r\n//用Promise封装原生ajx\r\nconst ajaxPromise = function (url, method, form) {\r\n    var p = new Promise((resolve, reject) => {\r\n        const request = {\r\n            url: url,\r\n            method: method,\r\n            contentType: 'application/json',\r\n            success: function (r) {\r\n                resolve(r)\r\n            },\r\n            error: function (e) {\r\n                const r = {\r\n                    success: false,\r\n                    message: '网络错误, 请重新尝试',\r\n                }\r\n                resolve(r)\r\n                //reject(r)\r\n            },\r\n        }\r\n        if (method === 'post') {\r\n            const data = JSON.stringify(form)\r\n            request.data = data\r\n        }\r\n        ajax(request)\r\n    })\r\n    return p\r\n}\r\n\r\n//封装 ajaxPromise\r\nconst _ajax = {\r\n    get: (path, params = {}) => {\r\n        const url = path + joinQuery(params)\r\n        const method = 'get'\r\n        const form = {}\r\n        return ajaxPromise(url, method, form)\r\n    },\r\n    post: (path, params = {}) => {\r\n        const url = path\r\n        const method = 'post'\r\n        return ajaxPromise(url, method, params)\r\n    },\r\n}\r\n\r\nmodule.exports = _ajax"],"sourceRoot":""}