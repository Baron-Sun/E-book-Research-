{"version":3,"sources":["media/imageDropShadow.png","media/image.png","utils/BooksAPI.js","service/book.js","components/BookCard/BookCard.js","pages/Home/Home.js","components/WebcamStreamCapture.js","pages/IframePage/IframePage.js","service/logout.js","components/Menu.js","components/Nav.js","service/login.js","actions/authUser.js","actions/users.js","pages/Login/LoginFrom/LoginFrom.js","pages/Login/Login.js","pages/Welcome/Welcome.js","pages/404/404.js","App.js","components/Foot.js","reducers/authUser.js","reducers/users.js","reducers/index.js","middleware/index.js","index.js","utils/request.js"],"names":["module","exports","token","localStorage","Math","random","toString","substr","Book","getList","params","request","get","then","response","openBook","data","BookItemComponent","handleClick","e","url","bookId","BooksAPI","preventDefault","message","warning","state","this","props","bookItem","id","bookList","users","title","imageLinks","authors","cover","to","pathname","query","key","onClick","className","style","width","height","backgroundImage","backgroundSize","join","React","Component","connect","Object","values","BooksApp","visible","window","location","videoVisible","getBookList","a","BookService","success","msg","setState","error","handleOk","handleCancel","videoHandleCancel","console","log","userType","tip","spinning","length","map","onOk","closable","onCancel","bodyStyle","textAlign","footer","type","destroyOnClose","outline","controls","src","WebcamStreamCapture","webcamRef","useRef","mediaRecorderRef","useState","capturing","setCapturing","recordedChunks","setRecordedChunks","handleStartCaptureClick","useCallback","current","MediaRecorder","stream","mimeType","addEventListener","handleDataAvailable","start","size","prev","concat","handleStopCaptureClick","stop","handleDownload","blob","Blob","formData","FormData","append","username","axios","method","notification","open","icon","CheckCircleOutlined","color","catch","CloseCircleOutlined","justify","align","flex","display","alignItems","justifyContent","PauseCircleOutlined","danger","PlayCircleOutlined","audio","ref","videoConstraints","facingMode","CloudUploadOutlined","disabled","marginBottom","IframePage","isLoading","scale","scaleResize","screenWidth","innerWidth","innerHeight","floor","authUser","iframeEl","onload","description","InfoCircleOutlined","paddingLeft","WebkitOverflowScrolling","position","zIndex","left","top","bottom","right","background","el","allowtransparency","frameBorder","scrolling","transform","Logout","post","handleLogout","history","LogoutService","detail","setTimeout","push","reload","MenuComponent","currentRoute","split","mode","selectedKeys","Item","exact","activeClassName","withRouter","Nav","user","backIcon","extra","Menu","Login","password","SET_AUTHED_USER","setAuthUser","RECEIVE_USERS","UPDATE_USERS","updateUserBookId","LoginForm","value","generateDropdownData","text","name","image","avatar","avatarURL","LoginService","bookPointer","onFinish","handleSubmit","bind","rules","required","prefix","UserOutlined","placeholder","LockOutlined","borderColor","htmlType","loading","handleLoading","marginLeft","marginRight","Logo","alt","fontSize","LoginFrom","onLoading","Welcome","styleBlueText","styleBlackText","bulletPointsList","fontWeight","styleContainer","styleCenter","styleButton","bulletPoints","item","span","pull","backgroundColor","tabSize","Page404","status","subTitle","App","Typography","Title","Paragraph","redirect","path","component","Home","render","LoadingBar","action","combineReducers","applyMiddleware","thunk","store","createStore","reducer","composeWithDevTools","middleware","ReactDOM","document","getElementById","joinQuery","Querys","keys","ajaxPromise","form","Promise","resolve","reject","contentType","r","JSON","stringify","XMLHttpRequest","withCredentials","undefined","setRequestHeader","onreadystatechange","event","readyState","parse","send","ajax","_ajax"],"mappings":"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","file":"static/js/index.8b5924c3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/imageDropShadow.4a439170.png\";","module.exports = __webpack_public_path__ + \"static/media/image.dd608d34.png\";","\nconst api = \"https://reactnd-books-api.udacity.com\"\n\n\n// Generate a unique token for storing your bookshelf data on the backend server.\nlet token = localStorage.token\nif (!token)\n  token = localStorage.token = Math.random().toString(36).substr(-8)\n\nconst headers = {\n  'Accept': 'application/json',\n  'Authorization': token\n}\n\nexport const get = (bookId) =>\n  fetch(`${api}/books/${bookId}`, { headers })\n    .then(res => res.json())\n    .then(data => data.book)\n\nexport const getAll = () =>\n  fetch(`${api}/books`, { headers })\n    .then(res => res.json())\n    .then(data => data.books)\n\nexport const update = (book, shelf) =>\n  fetch(`${api}/books/${book.id}`, {\n    method: 'PUT',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ shelf })\n  }).then(res => res.json())\n\nexport const search = (query, maxResults) =>\n  fetch(`${api}/search`, {\n    method: 'POST',\n    headers: {\n      ...headers,\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ query, maxResults })\n  }).then(res => res.json())\n    .then(data => data.books)","import request from '../utils/request'\n\n//请求逻辑实例化\n\nconst Book = {\n\n    getList: (params) => {\n        let data = request.get('/book/list', params)\n            .then((response) => {\n                return response\n            })\n        return data\n    },\n    openBook: (params = {}) => {\n        let data = request.get(`/_api2/read/openBook`, params)\n            .then((response) => {\n                return response\n            })\n        return data\n    }\n\n}\n\nexport default Book","\nimport React, { Fragment } from 'react'\nimport { Link } from \"react-router-dom\";\nimport { message } from \"antd\"\n\nimport { connect } from 'react-redux';\n\nimport BooksAPI from '../../service/book'\nimport './BookCard.css'\n\nclass BookItemComponent extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n\n        }\n    }\n\n    handleClick = (e, url, bookId) => {\n        if (!url) {\n            e.preventDefault();\n            message.warning('请先完成前一本书')\n        } else {\n            BooksAPI.openBook({ bookId })\n        }\n    }\n\n    render() {\n        const { bookItem, bookList, users } = this.props;\n\n        const { id, title, imageLinks = {}, authors = [], cover, url\n        } = bookItem;\n\n        return (\n            <Fragment>\n                <Link to={\n                    {\n                        pathname: `iframe/${id}`,\n                        query: {\n                            url: url,\n                            bookId: id\n                        }\n                    }}>\n                    <li key={id} onClick={(e) => this.handleClick(e, url, id)}>\n                        <div className=\"book\">\n                            <div className=\"book-top\">\n                                <div className=\"book-cover\" style={{ width: 128, height: 193, backgroundImage: `url(${cover})`, backgroundSize: '100%' }}></div>\n                            </div>\n                            <div className=\"book-title\">{title}</div>\n                            <div className=\"book-authors\">{authors.join()}</div>\n                        </div>\n                    </li>\n                </Link>\n\n            </Fragment>)\n    }\n}\n\nexport default connect(\n    ({ users }) => ({\n        users: Object.values(users)\n    }))(BookItemComponent);\n","import React from 'react'\nimport { Spin, Modal, message, Button } from \"antd\"\nimport * as BooksAPI from '../../utils/BooksAPI'\nimport BookService from '../../service/book'\n\nimport { groupBy } from '../../utils'\nimport BookItem from '../../components/BookCard/BookCard'\nimport './Home.css'\n\nclass BooksApp extends React.Component {\n    state = {\n        bookList: [],\n        visible: window.location.pathname === '/home' ? false : true,\n        videoVisible: false,\n    }\n\n    componentDidMount() {\n        this.getBookList()\n        const {data} = this.props.location\n        console.log(\"-----------------------\");\n        console.log(data);\n        console.log(\"-----------------------\");\n        if(data) {\n            this.setState({userType: data.userType}, () => {\n                console.log(this.state.userType, 'userType');\n            });\n        } else {\n            //Default to video A\n            this.setState({userType: 1}, () => {\n                console.log(this.state.userType, 'userType');\n            });\n        }\n    }\n\n\n    // getBookList = async () => {\n    //     let bookList = await BooksAPI.getAll()\n\n    //     let bookGroups = groupBy(bookList, 'shelf')\n    //     this.setState({\n    //         bookList: bookList,\n    //         bookGroups: bookGroups\n    //     })\n    // }\n\n    //请求列表数据\n    getBookList = async () => {\n\n        const { success, data, msg } = await BookService.getList()\n        if (success) {\n            this.setState({\n                bookList: data,\n            })\n        } else {\n            message.error(`${msg}`)\n        }\n\n    }\n\n    handleOk = e => {\n        this.setState({\n            visible: false,\n            videoVisible: true\n        });\n    };\n\n    handleCancel = e => {\n        this.setState({\n            visible: false,\n        });\n    };\n    videoHandleCancel = () => {\n        this.setState({\n            videoVisible: false,\n        });\n    }\n\n    render() {\n        const { bookList, visible, videoVisible, userType } = this.state\n        return (\n            <div className=\"home-books-results\">\n                {(!videoVisible && !visible) && <Spin tip=\"加载中...\" spinning={bookList.length > 0 ? false : true}>\n                    <ol className=\"books-grid\">\n                        {\n                            // 🔧 fix2:  Search results are not shown when all of the text is deleted out of the search input box.\n                            bookList.map(bookItem => <BookItem key={bookItem.id} bookList={bookList} getBookList={this.getBookList} bookItem={bookItem} />)\n                        }\n                    </ol>\n                </Spin>}\n                <Modal\n                    title={null}\n                    visible={visible}\n                    onOk={this.handleOk}\n                    closable={false}\n                    onCancel={this.handleCancel}\n                    bodyStyle={{ textAlign: 'center' }}\n                    footer={[\n                        <Button key=\"submit\" type=\"primary\" onClick={this.handleOk}>\n                            确定\n                        </Button>]}\n                >\n                    开始实验前请您观看本系统教学视频\n                </Modal>\n                <Modal\n                    title={null}\n                    width={'70%'}\n                    visible={videoVisible}\n                    onCancel={this.videoHandleCancel}\n                    footer={null}\n                    destroyOnClose={true}\n                >\n                    <video style={{ width: '100%', height: '100%', outline: 'unset' }} controls>\n                        {/*<source src='/video.mp4' type=\"video/mp4\" />*/}\n                        {userType == 2 && <source src='/video.mp4' type=\"video/mp4\" />}\n                        {userType == 3 && <source src='/videoB.mp4' type=\"video/mp4\" />}\n                    </video>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nexport default BooksApp\n","import React from 'react';\nimport Webcam from \"react-webcam\";\nimport axios from 'axios';\nimport { Button, Row, Col, notification } from 'antd';\nimport { CheckCircleOutlined, CloseCircleOutlined, CloudUploadOutlined, PlayCircleOutlined, PauseCircleOutlined } from '@ant-design/icons';\n\n\nexport const WebcamStreamCapture = (props) => {\n  const webcamRef = React.useRef(null);\n  const mediaRecorderRef = React.useRef(null);\n  const [capturing, setCapturing] = React.useState(false);\n  const [recordedChunks, setRecordedChunks] = React.useState([]);\n\n  const videoConstraints = {\n    width: 320,\n    height: 240,\n    facingMode: \"user\"\n  };\n\n  const handleStartCaptureClick = React.useCallback(() => {\n    console.log(\"Start Capture\");\n    setCapturing(true);\n    mediaRecorderRef.current = new MediaRecorder(webcamRef.current.stream, {\n      mimeType: \"video/webm\"\n    });\n    mediaRecorderRef.current.addEventListener(\n      \"dataavailable\",\n      handleDataAvailable\n    );\n    mediaRecorderRef.current.start();\n  }, [webcamRef, setCapturing, mediaRecorderRef]);\n\n  const handleDataAvailable = React.useCallback(\n    ({ data }) => {\n      if (data.size > 0) {\n        setRecordedChunks((prev) => prev.concat(data));\n      }\n    },\n    [setRecordedChunks]\n  );\n\n  const handleStopCaptureClick = React.useCallback(() => {\n    console.log(\"Stop Capture\");\n    mediaRecorderRef.current.stop();\n    setCapturing(false);\n  }, [mediaRecorderRef, webcamRef, setCapturing]);\n\n  const handleDownload = React.useCallback(() => {\n    console.log(\"Upload Video\");\n    if (recordedChunks.length) {\n      console.log(\"Creating blob\");\n      const blob = new Blob(recordedChunks, {\n        type: \"video/webm\"\n      });\n    var formData = new FormData();\n    formData.append(\"blob\", blob);\n    console.log(\"Username inside the webcam capture: \");\n    console.log(props);\n    formData.append(\"username\", props.username ? props.username : \"No Username Provided\");\n\n    axios({\n      method: 'post',\n      url: \"/_api2/video/upload\",\n      data: formData, \n    }).then(function (response) {\n      console.log(\"Success\");\n      console.log(response);\n      notification.open({\n        message: '上传成功！',\n        icon: <CheckCircleOutlined  style={{ color: '#a0d911' }} />,\n      });\n    })\n    .catch(function (error) {\n      console.log(\"Failed\");\n      console.log(error.response.data.message);\n      notification.open({\n        message: '上传失败！请联系管理员',\n        icon: <CloseCircleOutlined  style={{ color: '#f5222d' }} />,\n      });\n    });\n\n    setRecordedChunks([]);\n    }\n  }, [recordedChunks]);\n\n  const stopAndDownload = React.useCallback(() => { \n    handleStopCaptureClick();\n    if (recordedChunks.length > 0){\n      handleDownload();\n    }\n  });\n\n  return (\n    <>\n      <div>\n        <Row justify=\"space-around\" align=\"middle\">\n          <Col flex={1}>\n            <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n            }}>\n              {capturing ? (\n              <Button onClick={handleStopCaptureClick} type=\"primary\" icon={<PauseCircleOutlined />} danger>结束 End</Button>\n              ) : (\n                <Button onClick={handleStartCaptureClick}\n                  type=\"primary\"\n                  icon={<PlayCircleOutlined />}\n                >录制 Record</Button>\n              )}\n            </div>\n          </Col>\n\n          <Col flex={3}>\n            <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n            }}>\n              <Webcam audio={true} ref={webcamRef} videoConstraints={videoConstraints} width=\"180\"/>\n            </div>\n          </Col>\n\n          <Col flex={1}>\n            <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n            }}>\n              {recordedChunks.length > 0 && (\n                <Button onClick={handleDownload} \n                type=\"primary\"\n                icon={<CloudUploadOutlined />}\n                >上传 Upload</Button>\n              )}\n              {recordedChunks.length <= 0 && (\n                <Button disabled\n                type=\"primary\"\n                icon={<CloudUploadOutlined />}\n                >上传 Upload</Button>\n              )}\n            </div>\n          </Col>\n        </Row>\n\n        <Row style={{ marginBottom: 8 }}></Row>\n\n      </div>\n      \n    </>\n  );\n};\n","import React, { Component } from 'react';\nimport { Spin, notification } from 'antd';\nimport { connect } from 'react-redux';\nimport {WebcamStreamCapture} from '../../components/WebcamStreamCapture.js';\nimport { InfoCircleOutlined } from '@ant-design/icons';\n\nclass IframePage extends Component {\n  state = {\n    isLoading: true,\n    scale: 1\n  };\n\n  componentDidMount() {\n    console.log(this.props.authUser);\n    this.scaleResize()\n    this.iframeEl.onload = () => {\n      this.setState({\n        isLoading: false,\n      });\n    };\n\n    notification.open({\n      message: '阅读之前请点击“录制 Record”',\n      description:\n        '当您阅读结束，请点击“结束 Stop“并点击右侧”上传 Upload”',\n      icon: <InfoCircleOutlined style={{ color: '#f5222d' }} />,\n      onClick: () => {\n        console.log('Notification Clicked!');\n      },\n    });\n  }\n\n  //适配\n\n  scaleResize = () => {\n    let scale = 1;\n    let screenWidth = window.innerWidth;\n    let screenHeight = window.innerHeight;\n\n    if (screenWidth > 1024) {\n      scale = 1\n    } else if (1024 * 0.8 >= screenWidth <= 1024) {\n      scale = 0.8\n    } else {\n      scale = Math.floor(screenWidth / 1024 * 10) / 10\n    }\n    this.setState({\n      scale,\n    });\n  };\n\n  render() {\n    const { isLoading, scale } = this.state;\n    // 打平之后的菜单\n    const query = this.props.location.query || {};\n    const { url, bookId } = query;\n    const { authUser } = this.props;\n\n    return (\n      <div>\n        <div >\n          <WebcamStreamCapture username={this.props.authUser}/>\n        </div>\n        <div\n          className=\"iframe-container\"\n          style={{\n            paddingLeft: 10,\n            width: 1024,\n            height: 768,\n            WebkitOverflowScrolling: 'touch',\n            // overflow-y: scroll;\n            // pointerEvents: 'none'\n          }}\n        >\n          {isLoading ? (\n            <div\n              style={{\n                position: 'absolute',\n                zIndex: 1000,\n                left: 0,\n                top: 0,\n                bottom: 0,\n                right: 0,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                background: 'rgb(245, 247, 250)',\n              }}\n            >\n              <Spin />\n            </div>\n          ) : null}\n          <iframe\n            title=\"外链\"\n            ref={el => (this.iframeEl = el)}\n            allowtransparency=\"no\"\n            src={`${url}?user=${authUser}&bookId=${bookId}`}\n            frameBorder=\"0\"\n            width={'100%'}\n            height={'100%'}\n            scrolling=\"yes\"\n            style={{ transform: `scale(${scale})` }}\n          // sandbox=\"allow-scripts allow-same-origin allow-popups\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ authUser }) => ({ authUser }))(IframePage);\n","import request from '../utils/request'\n\n//请求逻辑实例化\n\nconst Logout = {\n\n    post: (params = {}) => {\n        // let { username, password } = params\n        let data = request.post(`/_api2/user/logout`)\n            .then((response) => {\n                return response\n            })\n        return data\n    }\n}\n\nexport default Logout","import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { Menu } from \"antd\"\nimport LogoutService from '../service/logout'\n\nasync function handleLogout(history){\n    try {\n        let { success, detail = {} } = await LogoutService.post();\n        if (success) {\n            setTimeout(() => {\n            history.push( {pathname: \"/\", data: {\n                userType: null\n              }}); // home page\n            window.location.reload(true); // welcome page\n            }, 500)\n        } else {\n            console.log('退出错误')\n        }\n    } catch (error) {\n        console.log(error.message)\n    }\n};\n\nconst MenuComponent = (props) => {\n    const { location, history } = props;\n    const currentRoute = location.pathname.split('/')[1] || 'home';\n    return (\n        <Menu mode=\"horizontal\" selectedKeys={[currentRoute]}>\n            <Menu.Item key=\"home\" >\n                <NavLink to=\"/home\" exact activeClassName=\"active\">\n                    Home\n                </NavLink>\n            </Menu.Item>\n            <Menu.Item key=\"logout\" onClick={()=>handleLogout(history)}>\n                    Logout\n            </Menu.Item>\n        </Menu>\n    );\n}\n\n\nexport default withRouter(MenuComponent)","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { PageHeader } from \"antd\"\nimport MenuComponent from './Menu'\n\nconst Nav = (props) => {\n  const { user = {} } = props;\n\n  return (\n    <PageHeader\n      className=\"site-page-header\"\n      backIcon={false}\n      title=\"Books View\"\n      extra={\n        <MenuComponent />\n      }\n    >\n    </PageHeader>\n  );\n}\n\n\nexport default connect(\n  ({ authUser, users }) => ({\n    user: users[authUser]\n  })\n)(Nav);","import request from '../utils/request'\n\n//请求逻辑实例化\n\nconst Login = {\n\n    post: (params = {}) => {\n        let { username, password } = params\n        let data = request.post(`/_api2/user/login?id=9&password=${password}&userType=1&username=${username}`, params)\n            .then((response) => {\n            \tconsole.log(response);\n                return response\n            })\n        return data\n    }\n}\n\nexport default Login","export const SET_AUTHED_USER = \"SET_AUTHED_USER\";\n\nexport function setAuthUser(id) {\n  return {\n    type: SET_AUTHED_USER,\n    id\n  };\n}\n","export const RECEIVE_USERS = \"RECEIVE_USERS\";\nexport const UPDATE_USERS = \"UPDATE_USERS\";\n\nexport function receiveUsers(users) {\n  return {\n    type: RECEIVE_USERS,\n    users\n  };\n}\n\n\nexport function updateUserBookId(id) {\n  return {\n    type: UPDATE_USERS,\n    bookId: id\n  };\n}","import React, { Component } from 'react';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons';\nimport { connect } from 'react-redux';\nimport { withRouter } from \"react-router-dom\";\nimport LoginService from '../../../service/login'\n\nimport {\n  Form,\n  Button,\n  Input,\n  Row,\n  message\n} from 'antd';\nimport { setAuthUser } from '../../../actions/authUser';\nimport { updateUserBookId } from '../../../actions/users';\n\nclass LoginForm extends Component {\n  static propTypes = {\n\n  };\n  state = {\n    value: ''\n  };\n  async handleSubmit(values) {\n\n    const { setAuthUser, updateUserBookId } = this.props;\n\n    const { username, password } = values\n\n    let { success, detail = {} } = await LoginService.post({ username, password })\n\n    if (success) {\n      message.success('登陆成功')\n      setTimeout(() => {\n        setAuthUser(`${username}`)\n        updateUserBookId(detail.bookPointer)\n        //Pass down detail.usertype\n\n        this.props.history.push({pathname: \"/\", data: {\n          userType: detail.userType\n        }});\n      }, 500)\n\n    } else {\n      message.error('账号密码错误')\n    }\n\n  };\n  generateDropdownData = () => {\n    const { users } = this.props;\n\n    return users.map(user => ({\n      key: user.id,\n      text: user.name,\n      value: user.id,\n      image: { avatar: true, src: user.avatarURL }\n    }));\n  };\n  render() {\n\n    return (\n\n      <Form style={{ 'width': '100%' }} onFinish={this.handleSubmit.bind(this)} className=\"login-form\">\n        <Form.Item\n          name=\"username\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Username!',\n            },\n          ]}\n        >\n          <Input style={{ 'borderRadius': '10px' }} prefix={<UserOutlined className=\"site-form-item-icon\" />} placeholder=\"Username\" />\n        </Form.Item>\n        <Form.Item\n          name=\"password\"\n          rules={[\n            {\n              required: true,\n              message: 'Please input your Password!',\n            },\n          ]}\n        >\n          <Input\n            prefix={<LockOutlined className=\"site-form-item-icon\" />}\n            style={{ 'borderRadius': '10px' }}\n            type=\"password\"\n            placeholder=\"Password\"\n          />\n        </Form.Item>\n        <Form.Item>\n          <Row justify=\"center\">\n            <Button type=\"primary\" style={{ background: \"orange\", borderColor: \"orange\", 'borderRadius': '25px' }} htmlType=\"submit\" className=\"login-form-button\">Login</Button>\n          </Row>\n        </Form.Item>\n      </Form>\n    );\n  }\n}\n\nexport default connect(\n  ({ users }) => ({\n    users: Object.values(users)\n  }),\n  { setAuthUser, updateUserBookId }\n)(withRouter(LoginForm));\n\n","import React, { Component } from 'react';\nimport { Card } from \"antd\";\nimport Logo from '../../media/image.png';\n\nimport LoginFrom from './LoginFrom/LoginFrom'\nimport './Login.scss'\nimport {\n  Row,\n} from 'antd';\n\nexport class Login extends Component {\n  state = {\n    loading: false\n  };\n  handleLoading = () => {\n    this.setState({ loading: true });\n  };\n\n  render() {\n    const { loading } = this.state\n    return (\n      <div>\n        <div className=\"login-box flex-wrap flex-center flex-middle flex-direction-column\">\n          <Card \n            style={{ 'width': '150%', 'borderRadius': '25px' }}\n            >\n            <img style={{\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              width: '55%'\n            }} src={Logo} alt=\"Logo\" />\n            <h3 style={{color:'orange', fontSize:'24px', textAlign: 'center'}}>Orange Oakleaf</h3>\n            <h3 style={{color:'orange', fontSize:'18px'}}>Sign In</h3>\n            <LoginFrom onLoading={this.handleLoading} />\n          </Card>\n        </div>\n      </div>\n    );\n  }\n}\n\n\n\nexport default Login;","import React, { Component } from 'react';\nimport Logo from '../../media/imageDropShadow.png';\nimport { Link } from 'react-router-dom';\nimport { Card, Row, Col, Button } from \"antd\";\n\nexport class Welcome extends Component {\n  state = {\n    loading: false\n  };\n  handleLoading = () => {\n    this.setState({ loading: true });\n  };\n\n\n  render() {\n    const { loading } = this.state\n    return (\n      <div>\n        <img style={{\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto',\n              width: '15%'\n            }} src={Logo} alt=\"Logo\" />\n        <h2 style={styleBlueText}>University of California, Irvine</h2>\n        <h2 style={styleBlueText}>Interactive Storybook Research Project</h2>\n        <h2 style={styleBlueText}>美国加州大学欧文分校 · 互动式英语电子绘本科研项目</h2>\n        <Card \n            style={{ \n              'width': '100%', \n              'borderRadius': '25px',\n              borderColor: 'yellow'\n              }}\n            >\n            <h4 style={styleBlackText}>尊敬的家长:</h4>\n            <h4 style={styleBlackText}>您好，感谢您与孩子一起参与本次研究项目！为了实验顺利进行，请您注意以下几点：</h4>\n            {bulletPointsList()}\n            <h4 style={styleBlackText}>如果您对实验有任何疑问，欢迎随时与我们联系：</h4>\n            <h4 style={{color:'black',fontSize:'medium',textAlign: 'center', fontWeight: 'bold'}}>微信：dayunheshui | 邮箱：dandany1@uci.edu | 电话：(中)13240736364 / (美)213-446-8747</h4>\n        </Card>\n          <h2 style={styleBlueText}>请您在做好准备后，点击“登录”</h2>\n          <div style={styleContainer}>\n            <div style={styleCenter}>\n              <Link to=\"/login\" > \n                 <Button type=\"primary\" style={styleButton}>登 录 &emsp; Login</Button>\n              </Link>\n            </div>\n          </div>\n          <br />\n          <br />\n          <br />\n          <br />\n          <h2 style={styleBlueText}>本网站备案/许可证编号为：浙ICP备2020036580号</h2>\n      </div>\n    );\n  }\n}\n\nconst bulletPoints = [\n'请在阅读期间确保网络畅通',\n '请在安静的环境下进行阅读',\n  '阅读时请保持设备音量适中',\n   '请允许我们的网站访问您的摄像头，并确保您和孩子的脸一直在摄像头范围内'\n];\n\nconst bulletPointsList = () => (\n  <ul>\n    {bulletPoints.map(function(item) {\n      return (\n        <Row>\n            <Col span={20} push={4}>\n            <div style={styleBlackText}> {item} </div>\n            </Col>\n            <Col span={4} pull={20}>\n              <img style={{\n                display: 'block',\n                marginLeft: 'auto',\n                marginRight: 'auto',\n                width: '30%'\n              }} src={Logo} alt=\"Logo\" />\n            </Col>\n          </Row>\n        );\n    })}\n  </ul>\n);\n\nconst styleTab = {\n  tabSize: 6\n}\n\nconst styleBlueText = {\n  color:'blue',\n  fontSize:'x-large',\n  textAlign: 'center',\n  fontWeight: 'bold'\n};\n\nconst styleBlackText = {\n  color:'black',\n  fontSize:'medium',\n  fontWeight: 'bold'\n};\n\nconst styleContainer = {\n  position: 'relative'\n};\n\nconst styleCenter = {\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center'\n};\n\nconst styleButton = {\n  backgroundColor: 'blue',\n  borderColor: 'blue',\n  textAlign: 'center',\n  fontSize:'medium',\n  'borderRadius': '10px',\n  fontWeight: 'bold',\n  tabSize: 6\n};\n\nexport default Welcome;\n","import React from \"react\";\nimport { Result, Button } from \"antd\"\nimport { withRouter } from \"react-router-dom\";\n\nconst Page404 = (props) => {\n    return (\n        <Result\n            status=\"403\"\n            title=\"需要重新登陆\"\n            subTitle=\"抱歉，刷新后无法保存进度 请返回主页重新登录\"\n            extra={<Button type=\"primary\" onClick={() => props.history.push('/')}>返回主页</Button>}\n        />\n    )\n}\n\nexport default withRouter(Page404)","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router, Route, Switch, Redirect } from \"react-router-dom\";\nimport Home from \"./pages/Home/Home\";\nimport IframePage from \"./pages/IframePage/IframePage\";\n\nimport Nav from \"./components/Nav\";\nimport Login from \"./pages/Login/Login\";\nimport Welcome from \"./pages/Welcome/Welcome\";\nimport Page404 from \"./pages/404/404\";\n\nimport { Fragment } from \"react\";\n\nimport Footer from \"./components/Foot\";\n// import './App.css'\nclass App extends Component {\n  componentDidMount() {\n    //this.context.router.transitionTo('/');\n    this.setState({ redirect: \"/\" });\n  }\n\n  render() {\n    const { authUser, loading } = this.props;\n    console.log('authUser', authUser)\n    return (\n      <Router>\n        <Fragment>\n          {authUser && <Nav />}\n          <div className=\"container flex-wrap flex-center flex-middle flex-direction-column\">\n            {!authUser\n              ?\n              <Route render={() => (\n                <Fragment>\n                  <Switch>\n                    <Route path=\"/\" exact component={Welcome} />\n                    <Route path=\"/login\" exact component={Login} />\n                    <Route path='*' component={Page404} />\n                  </Switch>\n                </Fragment>\n              )} />\n              :\n              <Fragment>\n                <Switch>\n                  <Route path=\"/\" exact component={Home} />\n                  <Route path=\"/home\" exact component={Home} />\n                  <Route path=\"/iframe/:bookId\" component={IframePage} />\n                </Switch>\n                {/* <Footer /> */}\n              </Fragment>\n            }\n          </div>\n        </Fragment>\n\n      </Router>\n    );\n  }\n}\n\nexport default connect(({ authUser, LoadingBar }) => ({ authUser, loading: LoadingBar }))(App);\n","import React from \"react\";\nimport { Typography, Space } from \"antd\"\nimport { Link } from \"react-router-dom\";\nimport { PieChartOutlined, AreaChartOutlined, FundOutlined } from '@ant-design/icons';\n\nconst { Title, Paragraph } = Typography;\n\nconst Footer = (props) => {\n\n  return (\n    <div className=\"footer-box flex-wrap flex-middle flex-direction-column\" style={{ width: \"100%\" }}>\n      <Title style={{ textAlign: 'center', padding: 20 }} level={4}>What we have is more than you expected</Title>\n      <div className=\"flex-wrap flex-middle\" style={{ padding: 20 }}>\n        <Space size={100}>\n          <div className='text-center'>\n            <PieChartOutlined style={{ fontSize: 50 }} />\n            <div>\n              icon1\n            </div>\n          </div>\n          <div className='text-center'>\n            <AreaChartOutlined style={{ fontSize: 50 }} />\n            <div>\n              icon2\n            </div>\n          </div>\n          <div className='text-center'>\n            <FundOutlined style={{ fontSize: 50 }} />\n            <div>\n              icon3\n            </div>\n          </div>\n\n\n        </Space>\n      </div>\n      <div className='footer-bottom' style={{ background: 'rgb(214, 216, 218)', padding: '50px 50px 10px' }}>\n        <Title style={{ textAlign: 'center' }} level={2}>Bringing Game to Everyone Life</Title>\n        <div className='flex-wrap flex-between' style={{ marginTop: 40 }}>\n          <div className='footer-left'>\n            <Space size=\"middle\">\n              <span>\n                <Link to=\"/\">\n                  Home\n              </Link>\n              </span>\n              <span>\n                <Link to=\"/Market\">\n                  Market\n              </Link>\n              </span>\n              <span>\n                <Link to=\"/myAccount\">\n                  My account\n              </Link>\n              </span>\n              <span>\n                <Link to=\"/contact\">\n                  contact\n              </Link>\n              </span>\n            </Space>\n\n          </div>\n          <div className='footer-right'>\n            Follow us\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nexport default Footer","import { SET_AUTHED_USER } from \"../actions/authUser\";\n\nexport default function authUser(state = null, action) {\n  switch (action.type) {\n    case SET_AUTHED_USER:\n      return action.id;\n    default:\n      return state;\n  }\n}\n","import { RECEIVE_USERS, UPDATE_USERS } from \"../actions/users\";\n\nexport default function users(state = {}, action) {\n  switch (action.type) {\n    case RECEIVE_USERS:\n      return {\n        ...state,\n        ...action.users\n      };\n    case UPDATE_USERS:\n      return {\n        ...state,\n        bookId: action.bookId\n      };\n    default:\n      return state;\n  }\n}\n","import { combineReducers } from \"redux\";\nimport authUser from \"./authUser\";\nimport users from \"./users\";\n// import { loadingBarReducer } from \"react-redux-loading\";\n\nexport default combineReducers({\n  authUser,\n  users,\n});\n","import thunk from \"redux-thunk\";\n// import logger from \"./logger\";\nimport { applyMiddleware } from \"redux\";\n\nexport default applyMiddleware(thunk);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport reducer from \"./reducers\";\nimport middleware from \"./middleware\";\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\nconst store = createStore(\n  reducer,\n  composeWithDevTools(middleware)\n); // 使用状态管理\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n","/**\n * ajax工具类\n * 也可用 axios(https://github.com/axios/axios)\n */\n\nconst joinQuery = function (params) {\n\n    var Querys = Object.keys(params).map(key => {\n        return `${key}=${params[key]}`\n    }).join('&')\n\n    return `?${Querys}`\n}\n\n//原生ajx\nconst ajax = function (request) {\n\n    var r = new XMLHttpRequest()\n    r.open(request.method, request.url, true)\n    r.withCredentials = true;\n    if (request.contentType !== undefined) {\n        r.setRequestHeader('Content-Type', request.contentType)\n    }\n    r.onreadystatechange = function (event) {\n        if (r.readyState === 4) {\n            if (r.status == 200) {\n                try {\n                    const data = JSON.parse(r.response)\n                    request.success(data)\n                } catch (error) {\n                    request.success({success:true}) // logout request does not return a json file; using catch to handle it. May need to talk to backend team later. \n                }\n            }\n            if (r.status == 500) {\n                request.error()\n            }\n        }\n    }\n    if (request.method === 'GET') {\n        r.send()\n    } else {\n        r.send(request.data)\n    }\n}\n\n//用Promise封装原生ajx\nconst ajaxPromise = function (url, method, form) {\n    var p = new Promise((resolve, reject) => {\n        const request = {\n            url: url,\n            method: method,\n            contentType: 'application/json',\n            success: function (r) {\n                resolve(r)\n            },\n            error: function (e) {\n                const r = {\n                    success: false,\n                    message: '网络错误, 请重新尝试',\n                }\n                resolve(r)\n                //reject(r)\n            },\n        }\n        if (method === 'post') {\n            const data = JSON.stringify(form)\n            request.data = data\n        }\n        ajax(request)\n    })\n    return p\n}\n\n//封装 ajaxPromise\nconst _ajax = {\n    get: (path, params = {}) => {\n        const url = path + joinQuery(params)\n        const method = 'get'\n        const form = {}\n        return ajaxPromise(url, method, form)\n    },\n    post: (path, params = {}) => {\n        const url = path\n        const method = 'post'\n        return ajaxPromise(url, method, params)\n    },\n}\n\nmodule.exports = _ajax"],"sourceRoot":""}