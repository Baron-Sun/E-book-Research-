{"ast":null,"code":"import _classCallCheck from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Spin,notification}from'antd';import{connect}from'react-redux';import{WebcamStreamCapture}from'../../components/WebcamStreamCapture.js';import{InfoCircleOutlined}from'@ant-design/icons';var IframePage=/*#__PURE__*/function(_Component){_inherits(IframePage,_Component);var _super=_createSuper(IframePage);function IframePage(){var _this;_classCallCheck(this,IframePage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={isLoading:true,scale:1};_this.scaleResize=function(){var scale=1;var screenWidth=window.innerWidth;var screenHeight=window.innerHeight;if(screenWidth>1024){scale=1;}else if(1024*0.8>=screenWidth<=1024){scale=0.8;}else{scale=Math.floor(screenWidth/1024*10)/10;}_this.setState({scale:scale});};return _this;}_createClass(IframePage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.scaleResize();this.iframeEl.onload=function(){_this2.setState({isLoading:false});};notification.open({message:'Please click start Capture before starting.',description:'When finished, please press the stop capture button',icon:/*#__PURE__*/React.createElement(InfoCircleOutlined,{style:{color:'#f5222d'}}),onClick:function onClick(){console.log('Notification Clicked!');}});}//适配\n},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,isLoading=_this$state.isLoading,scale=_this$state.scale;// 打平之后的菜单\nvar query=this.props.location.query||{};var url=query.url,bookId=query.bookId;var authUser=this.props.authUser;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(WebcamStreamCapture,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"iframe-container\",style:{paddingLeft:10,width:1024,height:768,WebkitOverflowScrolling:'touch'// overflow-y: scroll;\n// pointerEvents: 'none'\n}},isLoading?/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',zIndex:1000,left:0,top:0,bottom:0,right:0,display:'flex',alignItems:'center',justifyContent:'center',background:'rgb(245, 247, 250)'}},/*#__PURE__*/React.createElement(Spin,null)):null,/*#__PURE__*/React.createElement(\"iframe\",{title:\"\\u5916\\u94FE\",ref:function ref(el){return _this3.iframeEl=el;},allowtransparency:\"no\",src:\"\".concat(url,\"?user=\").concat(authUser,\"&bookId=\").concat(bookId),frameBorder:\"0\",width:'100%',height:'100%',scrolling:\"yes\",style:{transform:\"scale(\".concat(scale,\")\")}// sandbox=\"allow-scripts allow-same-origin allow-popups\"\n})));}}]);return IframePage;}(Component);export default connect(function(_ref){var authUser=_ref.authUser;return{authUser:authUser};})(IframePage);","map":{"version":3,"sources":["/Users/kanglantang/Desktop/E-Book/New/ebook0925/src/pages/IframePage/IframePage.js"],"names":["React","Component","Spin","notification","connect","WebcamStreamCapture","InfoCircleOutlined","IframePage","state","isLoading","scale","scaleResize","screenWidth","window","innerWidth","screenHeight","innerHeight","Math","floor","setState","iframeEl","onload","open","message","description","icon","color","onClick","console","log","query","props","location","url","bookId","authUser","paddingLeft","width","height","WebkitOverflowScrolling","position","zIndex","left","top","bottom","right","display","alignItems","justifyContent","background","el","transform"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Spin, notification } from 'antd';\nimport { connect } from 'react-redux';\nimport {WebcamStreamCapture} from '../../components/WebcamStreamCapture.js';\nimport { InfoCircleOutlined } from '@ant-design/icons';\n\nclass IframePage extends Component {\n  state = {\n    isLoading: true,\n    scale: 1\n  };\n\n  componentDidMount() {\n\n    this.scaleResize()\n    this.iframeEl.onload = () => {\n      this.setState({\n        isLoading: false,\n      });\n    };\n\n    notification.open({\n      message: 'Please click start Capture before starting.',\n      description:\n        'When finished, please press the stop capture button',\n      icon: <InfoCircleOutlined style={{ color: '#f5222d' }} />,\n      onClick: () => {\n        console.log('Notification Clicked!');\n      },\n    });\n  }\n\n  //适配\n\n  scaleResize = () => {\n    let scale = 1;\n    let screenWidth = window.innerWidth;\n    let screenHeight = window.innerHeight;\n\n    if (screenWidth > 1024) {\n      scale = 1\n    } else if (1024 * 0.8 >= screenWidth <= 1024) {\n      scale = 0.8\n    } else {\n      scale = Math.floor(screenWidth / 1024 * 10) / 10\n    }\n    this.setState({\n      scale,\n    });\n  };\n\n  render() {\n    const { isLoading, scale } = this.state;\n    // 打平之后的菜单\n    const query = this.props.location.query || {};\n    const { url, bookId } = query;\n    const { authUser } = this.props;\n\n    return (\n      <div>\n        <div >\n          <WebcamStreamCapture/>\n        </div>\n        <div\n          className=\"iframe-container\"\n          style={{\n            paddingLeft: 10,\n            width: 1024,\n            height: 768,\n            WebkitOverflowScrolling: 'touch',\n            // overflow-y: scroll;\n            // pointerEvents: 'none'\n          }}\n        >\n          {isLoading ? (\n            <div\n              style={{\n                position: 'absolute',\n                zIndex: 1000,\n                left: 0,\n                top: 0,\n                bottom: 0,\n                right: 0,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                background: 'rgb(245, 247, 250)',\n              }}\n            >\n              <Spin />\n            </div>\n          ) : null}\n          <iframe\n            title=\"外链\"\n            ref={el => (this.iframeEl = el)}\n            allowtransparency=\"no\"\n            src={`${url}?user=${authUser}&bookId=${bookId}`}\n            frameBorder=\"0\"\n            width={'100%'}\n            height={'100%'}\n            scrolling=\"yes\"\n            style={{ transform: `scale(${scale})` }}\n          // sandbox=\"allow-scripts allow-same-origin allow-popups\"\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default connect(({ authUser }) => ({ authUser }))(IframePage);\n"]},"metadata":{},"sourceType":"module"}