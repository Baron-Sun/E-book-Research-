{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kanglantang/Desktop/E-Book/New/ebook0925/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import{Menu}from\"antd\";import LogoutService from'../service/logout';function handleLogout(_x){return _handleLogout.apply(this,arguments);}function _handleLogout(){_handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(history){var _yield$LogoutService$,success,_yield$LogoutService$2,detail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return LogoutService.post();case 3:_yield$LogoutService$=_context.sent;success=_yield$LogoutService$.success;_yield$LogoutService$2=_yield$LogoutService$.detail;detail=_yield$LogoutService$2===void 0?{}:_yield$LogoutService$2;if(success){setTimeout(function(){history.push(\"/\");window.location.reload(true);},500);}else{console.log('退出错误');}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _handleLogout.apply(this,arguments);};var MenuComponent=function MenuComponent(props){var location=props.location;var currentRoute=location.pathname.split('/')[1]||'home';return/*#__PURE__*/React.createElement(Menu,{mode:\"horizontal\",selectedKeys:[currentRoute]},/*#__PURE__*/React.createElement(Menu.Item,{key:\"home\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/home\",exact:true,activeClassName:\"active\"},\"Home\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"logout\",onClick:function onClick(){return handleLogout(history);}},\"Logout\"));};export default withRouter(MenuComponent);","map":{"version":3,"sources":["/Users/kanglantang/Desktop/E-Book/New/ebook0925/src/components/Menu.js"],"names":["React","NavLink","withRouter","Menu","LogoutService","handleLogout","history","post","success","detail","setTimeout","push","window","location","reload","console","log","message","MenuComponent","props","currentRoute","pathname","split"],"mappings":"yUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,kBAApC,CACA,OAASC,IAAT,KAAqB,MAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mBAA1B,C,QAEeC,CAAAA,Y,gJAAf,iBAA4BC,OAA5B,wNAE6CF,CAAAA,aAAa,CAACG,IAAd,EAF7C,4CAEcC,OAFd,uBAEcA,OAFd,8CAEuBC,MAFvB,CAEuBA,MAFvB,iCAEgC,EAFhC,wBAGQ,GAAID,OAAJ,CAAa,CACTE,UAAU,CAAC,UAAM,CACjBJ,OAAO,CAACK,IAAR,CAAc,GAAd,EACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB,EACC,CAHS,CAGP,GAHO,CAAV,CAIH,CALD,IAKO,CACHC,OAAO,CAACC,GAAR,CAAY,MAAZ,EACH,CAVT,iFAYQD,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB,EAZR,qE,+CAcC,CAED,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,IACrBN,CAAAA,QADqB,CACRM,KADQ,CACrBN,QADqB,CAE7B,GAAMO,CAAAA,YAAY,CAAGP,QAAQ,CAACQ,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,GAAmC,MAAxD,CACA,mBACI,oBAAC,IAAD,EAAM,IAAI,CAAC,YAAX,CAAwB,YAAY,CAAE,CAACF,YAAD,CAAtC,eACI,oBAAC,IAAD,CAAM,IAAN,EAAW,GAAG,CAAC,MAAf,eACI,oBAAC,OAAD,EAAS,EAAE,CAAC,OAAZ,CAAoB,KAAK,KAAzB,CAA0B,eAAe,CAAC,QAA1C,SADJ,CADJ,cAMI,oBAAC,IAAD,CAAM,IAAN,EAAW,GAAG,CAAC,QAAf,CAAwB,OAAO,CAAE,yBAAIf,CAAAA,YAAY,CAACC,OAAD,CAAhB,EAAjC,WANJ,CADJ,CAYH,CAfD,CAkBA,cAAeJ,CAAAA,UAAU,CAACgB,aAAD,CAAzB","sourcesContent":["import React from \"react\";\nimport { NavLink, withRouter } from \"react-router-dom\";\nimport { Menu } from \"antd\"\nimport LogoutService from '../service/logout'\n\nasync function handleLogout(history){\n    try {\n        let { success, detail = {} } = await LogoutService.post();\n        if (success) {\n            setTimeout(() => {\n            history.push( \"/\");\n            window.location.reload(true);\n            }, 500)\n        } else {\n            console.log('退出错误')\n        }\n    } catch (error) {\n        console.log(error.message)\n    }\n};\n\nconst MenuComponent = (props) => {\n    const { location } = props;\n    const currentRoute = location.pathname.split('/')[1] || 'home';\n    return (\n        <Menu mode=\"horizontal\" selectedKeys={[currentRoute]}>\n            <Menu.Item key=\"home\" >\n                <NavLink to=\"/home\" exact activeClassName=\"active\">\n                    Home\n            </NavLink>\n            </Menu.Item>\n            <Menu.Item key=\"logout\" onClick={()=>handleLogout(history)}>\n                    Logout\n            </Menu.Item>\n        </Menu>\n    );\n}\n\n\nexport default withRouter(MenuComponent)"]},"metadata":{},"sourceType":"module"}