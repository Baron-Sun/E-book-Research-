{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Repos\\\\Projects\\\\test-ebook-4\\\\ebook0925\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Repos\\\\Projects\\\\test-ebook-4\\\\ebook0925\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{NavLink,withRouter}from\"react-router-dom\";import{Menu}from\"antd\";import LogoutService from'../service/logout';function handleLogout(_x){return _handleLogout.apply(this,arguments);}function _handleLogout(){_handleLogout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(history){var _yield$LogoutService$,success,_yield$LogoutService$2,detail;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return LogoutService.post();case 3:_yield$LogoutService$=_context.sent;success=_yield$LogoutService$.success;_yield$LogoutService$2=_yield$LogoutService$.detail;detail=_yield$LogoutService$2===void 0?{}:_yield$LogoutService$2;if(success){setTimeout(function(){history.push({pathname:\"/\",data:{userType:null}});// home page\nwindow.location.reload(true);// welcome page\n},500);}else{console.log('退出错误');}_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return _handleLogout.apply(this,arguments);};var MenuComponent=function MenuComponent(props){var location=props.location,history=props.history;var currentRoute=location.pathname.split('/')[1]||'home';return/*#__PURE__*/React.createElement(Menu,{mode:\"horizontal\",selectedKeys:[currentRoute]},/*#__PURE__*/React.createElement(Menu.Item,{key:\"home\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/home\",exact:true,activeClassName:\"active\"},\"Home\")),/*#__PURE__*/React.createElement(Menu.Item,{key:\"logout\",onClick:function onClick(){return handleLogout(history);}},\"Logout\"));};export default withRouter(MenuComponent);","map":{"version":3,"sources":["D:/Repos/Projects/test-ebook-4/ebook0925/src/components/Menu.js"],"names":["React","NavLink","withRouter","Menu","LogoutService","handleLogout","history","post","success","detail","setTimeout","push","pathname","data","userType","window","location","reload","console","log","message","MenuComponent","props","currentRoute","split"],"mappings":"6UAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,CAAkBC,UAAlB,KAAoC,kBAApC,CACA,OAASC,IAAT,KAAqB,MAArB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mBAA1B,C,QAEeC,CAAAA,Y,gJAAf,iBAA4BC,OAA5B,wNAE6CF,CAAAA,aAAa,CAACG,IAAd,EAF7C,4CAEcC,OAFd,uBAEcA,OAFd,8CAEuBC,MAFvB,CAEuBA,MAFvB,iCAEgC,EAFhC,wBAGQ,GAAID,OAAJ,CAAa,CACTE,UAAU,CAAC,UAAM,CACjBJ,OAAO,CAACK,IAAR,CAAc,CAACC,QAAQ,CAAE,GAAX,CAAgBC,IAAI,CAAE,CAChCC,QAAQ,CAAE,IADsB,CAAtB,CAAd,EAEO;AACPC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB,EAA8B;AAC7B,CALS,CAKP,GALO,CAAV,CAMH,CAPD,IAOO,CACHC,OAAO,CAACC,GAAR,CAAY,MAAZ,EACH,CAZT,iFAcQD,OAAO,CAACC,GAAR,CAAY,YAAMC,OAAlB,EAdR,qE,+CAgBC,CAED,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,KAAD,CAAW,IACrBN,CAAAA,QADqB,CACCM,KADD,CACrBN,QADqB,CACXV,OADW,CACCgB,KADD,CACXhB,OADW,CAE7B,GAAMiB,CAAAA,YAAY,CAAGP,QAAQ,CAACJ,QAAT,CAAkBY,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,GAAmC,MAAxD,CACA,mBACI,oBAAC,IAAD,EAAM,IAAI,CAAC,YAAX,CAAwB,YAAY,CAAE,CAACD,YAAD,CAAtC,eACI,oBAAC,IAAD,CAAM,IAAN,EAAW,GAAG,CAAC,MAAf,eACI,oBAAC,OAAD,EAAS,EAAE,CAAC,OAAZ,CAAoB,KAAK,KAAzB,CAA0B,eAAe,CAAC,QAA1C,SADJ,CADJ,cAMI,oBAAC,IAAD,CAAM,IAAN,EAAW,GAAG,CAAC,QAAf,CAAwB,OAAO,CAAE,yBAAIlB,CAAAA,YAAY,CAACC,OAAD,CAAhB,EAAjC,WANJ,CADJ,CAYH,CAfD,CAkBA,cAAeJ,CAAAA,UAAU,CAACmB,aAAD,CAAzB","sourcesContent":["import React from \"react\";\r\nimport { NavLink, withRouter } from \"react-router-dom\";\r\nimport { Menu } from \"antd\"\r\nimport LogoutService from '../service/logout'\r\n\r\nasync function handleLogout(history){\r\n    try {\r\n        let { success, detail = {} } = await LogoutService.post();\r\n        if (success) {\r\n            setTimeout(() => {\r\n            history.push( {pathname: \"/\", data: {\r\n                userType: null\r\n              }}); // home page\r\n            window.location.reload(true); // welcome page\r\n            }, 500)\r\n        } else {\r\n            console.log('退出错误')\r\n        }\r\n    } catch (error) {\r\n        console.log(error.message)\r\n    }\r\n};\r\n\r\nconst MenuComponent = (props) => {\r\n    const { location, history } = props;\r\n    const currentRoute = location.pathname.split('/')[1] || 'home';\r\n    return (\r\n        <Menu mode=\"horizontal\" selectedKeys={[currentRoute]}>\r\n            <Menu.Item key=\"home\" >\r\n                <NavLink to=\"/home\" exact activeClassName=\"active\">\r\n                    Home\r\n                </NavLink>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"logout\" onClick={()=>handleLogout(history)}>\r\n                    Logout\r\n            </Menu.Item>\r\n        </Menu>\r\n    );\r\n}\r\n\r\n\r\nexport default withRouter(MenuComponent)"]},"metadata":{},"sourceType":"module"}